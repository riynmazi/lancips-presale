<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MEME VIRAL DETECTOR</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box;font-family:'Space Grotesk',sans-serif;}
  body{background:#0f0f23;color:#fff;scroll-behavior:smooth;}
  a{text-decoration:none;color:inherit;}
  img{max-width:100%;display:block;}

  /* HEADER */
  header.hero{padding:1rem 2rem;display:flex;align-items:center;gap:1rem;position:relative;background:#0f0f23;}
  .back-btn{display:inline-block;width:30px;height:30px;background:#3B82F6;border-radius:6px;text-align:center;line-height:30px;color:#fff;font-weight:bold;}
  .hero-title{font-size:1.5rem;font-weight:700;}
  .live-status{position:absolute;top:100%;left:2rem;margin-top:0.5rem;display:flex;align-items:center;gap:0.5rem;font-size:0.9rem;}
  .pulse{width:10px;height:10px;border-radius:50%;background:#3B82F6;animation:pulse 1.2s infinite;}
  @keyframes pulse{0%{transform:scale(0.8);opacity:0.6;}50%{transform:scale(1.2);opacity:1;}100%{transform:scale(0.8);opacity:0.6;}}

  /* PILL */
  .pill{display:inline-block;padding:0.3rem 0.6rem;border-radius:12px;background:#3B82F6;font-size:0.8rem;margin:0.2rem;}

  /* CONTAINER */
  .container{max-width:1200px;margin:0 auto;padding:0 1rem;}

  /* TABS */
  .tabs{display:flex;justify-content:center;gap:1rem;margin:1rem 0;}
  .tab{padding:0.5rem 1rem;border-radius:8px;background:#1a1a36;cursor:pointer;display:flex;align-items:center;gap:0.5rem;transition:0.2s;}
  .tab.active{background:#3B82F6;color:#fff;}

  /* CARD LAYOUT */
  .desktop-layout{display:flex;gap:1rem;justify-content:center;margin-top:1rem;}
  .column{flex:1;}
  .cards{display:flex;flex-direction:column;gap:1rem;}
  .card{background:#1a1a36;border-radius:12px;padding:1rem;display:flex;flex-direction:column;gap:0.5rem;}
  .card-header{display:flex;justify-content:space-between;align-items:center;}
  .card-title{font-weight:700;display:flex;align-items:center;gap:0.5rem;}
  .badge{background:#3B82F6;padding:0.2rem 0.5rem;border-radius:10px;font-size:0.7rem;display:inline-flex;align-items:center;gap:0.2rem;}
  .badge.hot{background:#f97316;color:#fff;}
  .metrics{display:flex;gap:1rem;flex-wrap:wrap;}
  .metric{flex:1;min-width:60px;}
  .metric-label{display:block;font-size:0.7rem;color:#aaa;}
  .metric-value.positive{color:#22c55e;}
  .metric-value.negative{color:#ef4444;}
  .footer-row{display:flex;justify-content:space-between;align-items:center;margin-top:0.5rem;flex-wrap:wrap;}
  .action-link{display:inline-flex;align-items:center;gap:0.3rem;padding:0.3rem 0.6rem;border-radius:8px;background:#3B82F6;font-size:0.8rem;}

  /* MOBILE */
  .mobile-layout{display:none;}
  .tab-content{display:none;}
  .tab-content.active{display:block;}

  /* EMPTY STATE */
  .empty-state{display:flex;align-items:center;gap:0.5rem;justify-content:center;color:#aaa;font-size:0.9rem;}

  /* TOAST */
  .toast{position:fixed;top:1rem;right:1rem;background:#3B82F6;padding:0.5rem 1rem;border-radius:12px;opacity:0;pointer-events:none;transition:0.3s;color:#fff;}
  .toast.show{opacity:1;pointer-events:auto;}

  /* FOOTER */
  footer.footer{margin-top:2rem;text-align:center;color:#aaa;font-size:0.8rem;}

  @media(max-width:768px){.desktop-layout{display:none;}.mobile-layout{display:block;}.tabs{flex-wrap:wrap;}}
</style>
</head>
<body>

<header class="hero">
  <a href="https://www.lancips.xyz" target="_blank" class="back-btn">&#8592;</a>
  <div class="hero-title">MEME VIRAL DETECTOR</div>
  <div class="live-status"><span class="pulse"></span><span id="scan-count">0</span> tokens scanned today</div>
  <span class="pill">DYOR</span>
</header>

<!-- TABS MOBILE -->
<section class="mobile-layout container">
  <div class="tabs">
    <button class="tab active" data-tab="viral">üî• VIRAL</button>
    <button class="tab" data-tab="new">‚è± NEW</button>
  </div>
  <div id="mobile-viral" class="tab-content active"></div>
  <div id="mobile-new" class="tab-content"></div>
</section>

<!-- DESKTOP -->
<section class="desktop-layout container">
  <div class="column">
    <h2>üî• POTENTIALLY VIRAL</h2>
    <div id="viral-cards" class="cards"></div>
  </div>
  <div class="column">
    <h2>‚è± FRESHLY MINTED</h2>
    <div id="new-cards" class="cards"></div>
  </div>
</section>

<div id="toast" class="toast">NEW VIRAL DETECTED! üö®</div>
<footer class="footer">¬© 2025 <b>Lancips</b> ‚Äî Fun, absurd, and dangerously early. DYOR</footer>

<script>
(function(){
  const tabs=document.querySelectorAll('.tab');
  const mobileViral=document.getElementById('mobile-viral');
  const mobileNew=document.getElementById('mobile-new');
  const viralCards=document.getElementById('viral-cards');
  const newCards=document.getElementById('new-cards');
  const scanCount=document.getElementById('scan-count');
  const toast=document.getElementById('toast');
  const API_URL='https://backend-memevirdec.vercel.app/api/fetch-meme-tokens';
  const POLL_MS=60000;
  const shownViral=new Set();

  tabs.forEach(tab=>tab.addEventListener('click',()=>{
    tabs.forEach(t=>t.classList.remove('active'));
    tab.classList.add('active');
    if(tab.dataset.tab==='viral'){mobileViral.classList.add('active');mobileNew.classList.remove('active');}
    else{mobileViral.classList.remove('active');mobileNew.classList.add('active');}
  }));

  function formatUSD(n){n=Number(n||0);if(n>=1e9)return '$'+(n/1e9).toFixed(2)+'B';if(n>=1e6)return '$'+(n/1e6).toFixed(2)+'M';if(n>=1e3)return '$'+(n/1e3).toFixed(2)+'K';return '$'+n.toFixed(2);}
  function formatPct(n){if(n===undefined||n===null||isNaN(n))return'‚Äî';return(n>0?'+':'')+n.toFixed(2)+'%';}
  function makeCard(p){
    const card=document.createElement('article'); card.className='card';
    const base=p.baseToken?.symbol||p.token0?.symbol||'',quote=p.quoteToken?.symbol||p.token1?.symbol||'',price=p.priceUsd?Number(p.priceUsd):null;
    const ch5m=p.priceChange?.m5?Number(p.priceChange.m5):null,ch1h=p.priceChange?.h1?Number(p.priceChange.h1):null,ch6h=p.priceChange?.h6?Number(p.priceChange.h6):null;
    const hot=false,createdAgo=p.pairCreatedAt?Math.floor((Date.now()-Number(p.pairCreatedAt))/60000):null;
    card.innerHTML=`
<div class="card-header"><div class="card-title">${base}/${quote}${hot?'<span class="badge hot">HOT</span>':''}</div></div>
<div class="metrics">
<div class="metric"><span class="metric-label">Price (USD)</span><span class="metric-value">${price?formatUSD(price):'‚Äî'}</span></div>
<div class="metric"><span class="metric-label">5m</span><span class="metric-value ${ch5m>=0?'positive':'negative'}">${formatPct(ch5m)}</span></div>
<div class="metric"><span class="metric-label">1h</span><span class="metric-value ${ch1h>=0?'positive':'negative'}">${formatPct(ch1h)}</span></div>
<div class="metric"><span class="metric-label">6h</span><span class="metric-value ${ch6h>=0?'positive':'negative'}">${formatPct(ch6h)}</span></div></div>
<div class="footer-row"><a class="action-link" href="${p.url}" target="_blank">View</a></div>`;
    return card;
  }
  function makeEmpty(){const d=document.createElement('div');d.className='empty-state';d.textContent='Tidak ada data token tersedia saat ini';return d;}

  async function fetchTokens(){
    try{
      const res=await fetch(API_URL);const data=await res.json();return Array.isArray(data.tokens)?data.tokens:[];
    }catch{return [];}
  }

  async function render(){
    const tokens=await fetchTokens();
    viralCards.innerHTML=''; newCards.innerHTML=''; mobileViral.innerHTML=''; mobileNew.innerHTML='';
    if(!tokens.length){viralCards.appendChild(makeEmpty());newCards.appendChild(makeEmpty());mobileViral.appendChild(makeEmpty());mobileNew.appendChild(makeEmpty());scanCount.textContent=0;return;}
    tokens.forEach(p=>{
      const c=makeCard(p);viralCards.appendChild(c);mobileViral.appendChild(c.cloneNode(true));
    });
    tokens.forEach(p=>{
      const c=makeCard(p);newCards.appendChild(c);mobileNew.appendChild(c.cloneNode(true));
    });
    scanCount.textContent=tokens.length;
  }

  render(); setInterval(render,POLL_MS);
})();
</script>

</body>
</html>