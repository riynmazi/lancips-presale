<!DOCTYPE html>
<html lang="en" class="document-root">

  <head>
    <title>MEME VIRAL DETECTOR</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index,follow" />
    <meta name="generator" content="GrapesJS Studio" />
    <meta name="description" content="Real-time Meme Token Detector – powered by Lancips." />
    <link rel="icon" href="https://em-content.zobj.net/source/microsoft-teams/363/coin_1fa99.png" />
    <meta name="theme-color" content="#0f1220" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&amp;family=Space+Grotesk:wght@400;700&amp;display=swap" rel="stylesheet" />
  </head>

  <body class="gjs-t-body cls-6kfc4e">
    <header class="main-header" id="i44cl">
      <div id="ik9nc" data-mvd-root="true" class="hero-container">
        <div id="iogn5" class="hero-left-block">
          <a href="https://www.lancips.xyz" target="_blank" rel="noopener" id="ia0vi" class="gjs-t-link external-link-back-button">
            <img src="https://api.iconify.design/lucide-arrow-left.svg?color=currentColor&amp;width=18&amp;height=18" alt="Back to Lancips" loading="lazy" id="iqopj" class="back-icon" />
            <span id="ici0j" class="back-link-label">Back to Lancips</span>
          </a>
          <span id="izfq4" class="dyor-pill">DYOR</span>
        </div>
        <div id="ismtv" class="live-status">
          <span id="itni1" class="pulse-dot"></span>
          <p id="ig2xf" class="scan-count-text">
            <span id="scan-count" class="scan-count-value">0</span> tokens scanned today
          </p>
        </div>
        <script id="i8s2e">
          (function() {
            if (window.__MVD_BACKEND_ENABLED__) {
              console.debug('[MVD] Backend renderer already enabled, skipping init.');
              return;
            }
            window.__MVD_BACKEND_ENABLED__ = true;

            const DEBUG = true;
            const API_URL = 'https://backend-memevirdec.vercel.app/api/fetch-meme-tokens';
            const FRESH_WINDOW_MS = 6 * 60 * 60 * 1000; // 6h
            const POLL_MS = 60000; // 60s
            const VIRAL_LIMIT = 12;
            const NEW_LIMIT = 12;

            let rootFeature = document.getElementById('meme-viral-feature') || document;
            const els = {
              scanCount: null,
              loading: null,
              viralCards: null,
              newCards: null,
              mobileViral: null,
              mobileNew: null,
              toast: null,
              tabs: []
            };

            function refreshEls() {
              rootFeature = document.getElementById('meme-viral-feature') || document;
              els.scanCount = document.getElementById('scan-count');
              els.loading = rootFeature.querySelector('#loading');
              els.viralCards = rootFeature.querySelector('#viral-cards');
              els.newCards = rootFeature.querySelector('#new-cards');
              els.mobileViral = rootFeature.querySelector('#mobile-viral');
              els.mobileNew = rootFeature.querySelector('#mobile-new');
              els.toast = rootFeature.querySelector('#toast');
              els.tabs = Array.from(rootFeature.querySelectorAll('[role="tab"]'));
              if (DEBUG) console.debug('[MVD] Refreshed elements:', {
                hasRoot: !!document.getElementById('meme-viral-feature'),
                viral: !!els.viralCards,
                fresh: !!els.newCards,
                mViral: !!els.mobileViral,
                mNew: !!els.mobileNew,
                loading: !!els.loading
              });
            }
            refreshEls();

            // Tabs handling without relying on hidden class
            function initTabs() {
              if (!els.tabs || !els.tabs.length) return;
              els.tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                  els.tabs.forEach(t => t.setAttribute('aria-selected', 'false'));
                  tab.setAttribute('aria-selected', 'true');
                  const active = tab.getAttribute('data-tab');
                  if (els.mobileViral && els.mobileNew) {
                    if (active === 'viral') {
                      els.mobileViral.style.display = '';
                      els.mobileNew.style.display = 'none';
                    } else {
                      els.mobileViral.style.display = 'none';
                      els.mobileNew.style.display = '';
                    }
                  }
                });
              });
            }

            function chainFromURL(url = '') {
              try {
                const u = new URL(url);
                const parts = u.pathname.split('/').filter(Boolean);
                return parts[0] || 'unknown';
              } catch {
                return 'unknown';
              }
            }

            function isMemeLike(symbol, name) {
              const s = (symbol || '').toLowerCase();
              const n = (name || '').toLowerCase();
              const kws = ['pepe', 'dog', 'doge', 'shib', 'inu', 'cat', 'elon', 'meme', 'moon', 'pump', 'wojak', 'floki', 'bonk', 'pudgy', 'corgi', 'kitty'];
              return kws.some(k => s.includes(k) || n.includes(k));
            }

            function formatUSD(n) {
              const num = Number(n || 0);
              if (num >= 1e9) return '$' + (num / 1e9).toFixed(2) + 'B';
              if (num >= 1e6) return '$' + (num / 1e6).toFixed(2) + 'M';
              if (num >= 1e3) return '$' + (num / 1e3).toFixed(2) + 'K';
              return '$' + num.toFixed(2);
            }

            function formatPct(n) {
              if (n === undefined || n === null || isNaN(n)) return '—';
              const v = Number(n);
              const sign = v > 0 ? '+' : '';
              return sign + v.toFixed(2) + '%';
            }

            function scorePair(p) {
              const vol = (p.volume && p.volume.h24) ? Number(p.volume.h24) : 0;
              const liq = (p.liquidity && p.liquidity.usd) ? Number(p.liquidity.usd) : 0;
              const ch1 = (p.priceChange && p.priceChange.h1) ? Number(p.priceChange.h1) : 0;
              const ch6 = (p.priceChange && p.priceChange.h6) ? Number(p.priceChange.h6) : 0;
              const buys = (p.txns && p.txns.h1 && p.txns.h1.buys) ? Number(p.txns.h1.buys) : 0;
              const sells = (p.txns && p.txns.h1 && p.txns.h1.sells) ? Number(p.txns.h1.sells) : 0;
              const momentum = ch1 * 1.2 + ch6 * 0.6 + (buys - sells) * 0.8;
              return Math.log10(vol + 1) * 1.5 + Math.log10(liq + 1) + momentum;
            }

            function isFresh(p) {
              const created = p.pairCreatedAt ? Number(p.pairCreatedAt) : null;
              if (!created) return false;
              return (Date.now() - created) < FRESH_WINDOW_MS;
            }

            function isViral(p) {
              const vol = (p.volume && p.volume.h24) ? Number(p.volume.h24) : 0;
              const liq = (p.liquidity && p.liquidity.usd) ? Number(p.liquidity.usd) : 0;
              const ch1 = (p.priceChange && p.priceChange.h1) ? Number(p.priceChange.h1) : 0;
              const ch6 = (p.priceChange && p.priceChange.h6) ? Number(p.priceChange.h6) : 0;
              const baseSym = p.baseToken ? p.baseToken.symbol : (p.token0 ? p.token0.symbol : p.baseSymbol || '');
              const baseName = p.baseToken ? p.baseToken.name : (p.token0 ? p.token0.name : p.baseName || '');
              const meme = isMemeLike(baseSym, baseName);
              const momentum = ch1 > 50 || ch6 > 100;
              const healthy = liq >= 30000 || vol >= 100000;
              return meme && healthy && (momentum || scorePair(p) > 30);
            }

            function normalizeToken(t) {
              const baseToken = t.baseToken || t.token0 || {
                symbol: t.baseSymbol || t.symbol || '',
                name: t.baseName || t.name || ''
              };
              const quoteToken = t.quoteToken || t.token1 || {
                symbol: t.quoteSymbol || t.quote || 'WETH',
                name: t.quoteName || ''
              };
              const volume = t.volume || {
                h24: t.volume24h || t.vol24h || 0
              };
              const liquidity = t.liquidity || {
                usd: t.liquidityUsd || t.liqUsd || 0
              };
              const priceChange = t.priceChange || t.change || {
                m5: t.change5m,
                h1: t.change1h || t.h1,
                h6: t.change6h || t.h6
              };
              const txns = t.txns || {
                h1: {
                  buys: t.buys1h || 0,
                  sells: t.sells1h || 0
                }
              };
              const url = t.url || t.dexUrl || t.dexscreener || (t.chain && t.pairAddress ? `https://dexscreener.com/${t.chain}/${t.pairAddress}` : '');
              const priceUsd = t.priceUsd !== undefined ? t.priceUsd : (t.price && t.price.usd !== undefined ? t.price.usd : (typeof t.price === 'number' ? t.price : null));
              const pairCreatedAt = t.pairCreatedAt || t.createdAt || t.launchAt || t.timestamp || null;

              const normalized = {
                ...t,
                url,
                baseToken,
                quoteToken,
                volume: {
                  h24: Number(volume.h24 || 0)
                },
                liquidity: {
                  usd: Number(liquidity.usd || 0)
                },
                priceChange: {
                  m5: priceChange && priceChange.m5 !== undefined ? Number(priceChange.m5) : null,
                  h1: priceChange && priceChange.h1 !== undefined ? Number(priceChange.h1) : null,
                  h6: priceChange && priceChange.h6 !== undefined ? Number(priceChange.h6) : null
                },
                txns: {
                  h1: {
                    buys: Number((txns.h1 && txns.h1.buys) || 0),
                    sells: Number((txns.h1 && txns.h1.sells) || 0)
                  }
                },
                priceUsd: priceUsd !== null ? Number(priceUsd) : null,
                pairCreatedAt: pairCreatedAt ? Number(pairCreatedAt) : null,
                pairAddress: t.pairAddress || t.address || null
              };
              return normalized;
            }

            async function fetchTokens() {
              if (DEBUG) console.debug('[MVD] Fetching tokens from API:', API_URL);
              const res = await fetch(API_URL, {
                headers: {
                  'accept': 'application/json'
                }
              });
              if (!res.ok) throw new Error('Network error');
              const data = await res.json();
              let arr = [];
              if (Array.isArray(data)) arr = data;
              else if (Array.isArray(data.tokens)) arr = data.tokens;
              else if (Array.isArray(data.data)) arr = data.data;
              const normalized = arr.map(normalizeToken);
              if (DEBUG) console.debug('[MVD] Fetched tokens:', {
                total: arr.length,
                normalized: normalized.length
              });
              return normalized;
            }

            function makeEmptyState() {
              const wrap = document.createElement('div');
              wrap.className = 'mvd-empty';
              wrap.innerHTML = `
          <img src="https://api.iconify.design/lucide-info.svg?color=currentColor&width=18&height=18" alt="Info" loading="lazy"/>
          <span>No token data is available right now</span>
        `;
              return wrap;
            }

            function makeCard(p) {
              const chain = p.chain || chainFromURL(p.url);
              const baseSymbol = (p.baseToken && p.baseToken.symbol) || '';
              const quoteSymbol = (p.quoteToken && p.quoteToken.symbol) || '';
              const price = p.priceUsd;
              const ch5m = p.priceChange ? p.priceChange.m5 : null;
              const ch1h = p.priceChange ? p.priceChange.h1 : null;
              const ch6h = p.priceChange ? p.priceChange.h6 : null;
              const hot = isViral(p);
              const created = p.pairCreatedAt ? Number(p.pairCreatedAt) : null;
              const createdAgo = created ? Math.max(1, Math.floor((Date.now() - created) / (60 * 1000))) : null;

              const card = document.createElement('article');
              card.className = 'mvd-card gjs-t-border';
              card.setAttribute('data-gjs-name', 'Token Card');

              // Inline prioritized styles to avoid being overridden
              card.style.backgroundColor = '#0f1426';
              card.style.border = '1px solid #374151';
              card.style.borderRadius = '16px';
              card.style.padding = '16px';

              card.innerHTML = `
          <div class="mvd-card-header">
            <div class="mvd-title-wrap">
              <span class="mvd-pair">${(baseSymbol || '—')}/${(quoteSymbol || '—')}</span>
              ${hot ? `
              <span class="mvd-badge mvd-badge--hot" title="Trending">
                <img src="https://api.iconify.design/lucide-trending-up.svg?color=currentColor&width=14&height=14" alt="Trending up" loading="lazy"/>
                HOT
              </span>` : ''}
            </div>
            <span class="mvd-badge mvd-badge--chain" title="${(chain || 'unknown').toUpperCase()}">
              <img src="https://api.iconify.design/lucide-link.svg?color=currentColor&width=16&height=16" alt="Chain" loading="lazy"/>
              ${(chain || 'unknown').toUpperCase()}
            </span>
          </div>

          <div class="mvd-metrics">
            <div class="mvd-metric">
              <span class="mvd-metric-label">Price (USD)</span>
              <span class="mvd-metric-value">${price !== null && price !== undefined ? ('$' + Number(price).toFixed(6)) : '—'}</span>
            </div>
            <div class="mvd-metric">
              <span class="mvd-metric-label">5m</span>
              <span class="mvd-metric-value ${ch5m !== null ? (ch5m >= 0 ? 'mvd-metric-up' : 'mvd-metric-down') : ''}">${formatPct(ch5m)}</span>
            </div>
            <div class="mvd-metric">
              <span class="mvd-metric-label">1h</span>
              <span class="mvd-metric-value ${ch1h !== null ? (ch1h >= 0 ? 'mvd-metric-up' : 'mvd-metric-down') : ''}">${formatPct(ch1h)}</span>
            </div>
            <div class="mvd-metric">
              <span class="mvd-metric-label">6h</span>
              <span class="mvd-metric-value ${ch6h !== null ? (ch6h >= 0 ? 'mvd-metric-up' : 'mvd-metric-down') : ''}">${formatPct(ch6h)}</span>
            </div>
          </div>

          <div class="mvd-footer">
            <div class="mvd-chips">
              <span class="mvd-chip" title="24h Volume">
                <img src="https://api.iconify.design/lucide-dollar-sign.svg?color=currentColor&width=14&height=14" alt="Volume" loading="lazy"/>
                ${formatUSD(p.volume && p.volume.h24 ? p.volume.h24 : 0)}
              </span>
              <span class="mvd-chip" title="Liquidity">
                <img src="https://api.iconify.design/lucide-droplets.svg?color=currentColor&width=14&height=14" alt="Liquidity" loading="lazy"/>
                ${formatUSD(p.liquidity && p.liquidity.usd ? p.liquidity.usd : 0)}
              </span>
              ${createdAgo ? `
              <span class="mvd-chip mvd-age" title="Pair age">
                <img src="https://api.iconify.design/lucide-clock.svg?color=currentColor&width=14&height=14" alt="Age" loading="lazy"/>
                ${createdAgo}m ago
              </span>` : ''}
            </div>
            <a class="mvd-view gjs-t-button" href="${p.url || '#'}" target="_blank" rel="noopener" aria-label="View on DexScreener">
              <img src="https://api.iconify.design/lucide-external-link.svg?color=currentColor&width=18&height=18" alt="Open" loading="lazy"/>
              View
            </a>
          </div>
        `;
              return card;
            }

            function updateScanCount(pairs) {
              const since = Date.now() - (24 * 60 * 60 * 1000);
              const countToday = pairs.filter(p => p.pairCreatedAt && Number(p.pairCreatedAt) >= since).length;
              if (els.scanCount) els.scanCount.textContent = String(countToday);
              if (DEBUG) console.debug('[MVD] Scan count (24h):', countToday);
            }

            function setLoading(show) {
              if (!els.loading) return;
              els.loading.style.display = show ? '' : 'none';
            }

            const shownViral = new Set();

            function showToast() {
              if (!els.toast) return;
              els.toast.style.display = '';
              setTimeout(() => {
                if (els.toast) els.toast.style.display = 'none';
              }, 2600);
            }

            function ensureContainersReady() {
              // Re-query if containers are missing (e.g., script executed before DOM parsed)
              if (!els.viralCards || !els.newCards || !els.mobileViral || !els.mobileNew) {
                refreshEls();
              }
              const ready = !!(els.viralCards && els.newCards && els.mobileViral && els.mobileNew);
              if (!ready && DEBUG) console.warn('[MVD] Containers not ready yet.');
              return ready;
            }

            function enhanceExistingCards() {
              // If another script renders basic cards, enhance them visually by adding our class
              ['#viral-cards', '#new-cards', '#mobile-viral', '#mobile-new'].forEach(sel => {
                const container = rootFeature.querySelector(sel);
                if (!container) return;
                container.querySelectorAll('article[data-gjs-name="Token Card"]').forEach(card => {
                  if (!card.classList.contains('mvd-card')) {
                    card.classList.add('mvd-card', 'gjs-t-border');
                    // Inline essentials to beat any conflicting styles
                    card.style.backgroundColor = '#0f1426';
                    card.style.border = '1px solid #374151';
                    card.style.borderRadius = '16px';
                    card.style.padding = '16px';
                  }
                });
              });
            }

            function render(pairs) {
              if (!ensureContainersReady()) return;

              const fresh = pairs.filter(isFresh).sort((a, b) => Number(b.pairCreatedAt || 0) - Number(a.pairCreatedAt || 0)).slice(0, NEW_LIMIT);
              const viral = pairs.filter(isViral).sort((a, b) => scorePair(b) - scorePair(a)).slice(0, VIRAL_LIMIT);

              if (DEBUG) console.debug('[MVD] Render lists:', {
                viral: viral.length,
                fresh: fresh.length,
                total: pairs.length
              });

              if (els.viralCards) els.viralCards.innerHTML = '';
              if (els.newCards) els.newCards.innerHTML = '';
              if (els.mobileViral) els.mobileViral.innerHTML = '';
              if (els.mobileNew) els.mobileNew.innerHTML = '';

              if (!viral.length) {
                const empty = makeEmptyState();
                if (els.viralCards) els.viralCards.appendChild(empty.cloneNode(true));
                if (els.mobileViral) els.mobileViral.appendChild(empty.cloneNode(true));
              } else {
                viral.forEach(p => {
                  const card = makeCard(p);
                  if (els.viralCards) els.viralCards.appendChild(card.cloneNode(true));
                  if (els.mobileViral) els.mobileViral.appendChild(card);
                  const key = p.pairAddress || p.url || JSON.stringify([p.baseToken?.symbol, p.quoteToken?.symbol, p.chain || chainFromURL(p.url)]);
                  if (key && !shownViral.has(key)) {
                    shownViral.add(key);
                    showToast();
                  }
                });
              }

              if (!fresh.length) {
                const empty = makeEmptyState();
                if (els.newCards) els.newCards.appendChild(empty.cloneNode(true));
                if (els.mobileNew) els.mobileNew.appendChild(empty.cloneNode(true));
              } else {
                fresh.forEach(p => {
                  const card = makeCard(p);
                  if (els.newCards) els.newCards.appendChild(card.cloneNode(true));
                  if (els.mobileNew) els.mobileNew.appendChild(card);
                });
              }

              updateScanCount(pairs);
              enhanceExistingCards(); // ensure styling persists
            }

            async function scan() {
              if (!ensureContainersReady()) {
                // Try again on next tick if DOM not ready yet
                setTimeout(scan, 60);
                return;
              }
              setLoading(true);
              try {
                const tokens = await fetchTokens();
                render(tokens);
              } catch (err) {
                console.error('[MVD] Scan error:', err);
                if (els.viralCards) els.viralCards.innerHTML = '';
                if (els.newCards) els.newCards.innerHTML = '';
                if (els.mobileViral) els.mobileViral.innerHTML = '';
                if (els.mobileNew) els.mobileNew.innerHTML = '';
                const empty = makeEmptyState();
                if (els.viralCards) els.viralCards.appendChild(empty.cloneNode(true));
                if (els.newCards) els.newCards.appendChild(empty.cloneNode(true));
                if (els.mobileViral) els.mobileViral.appendChild(empty.cloneNode(true));
                if (els.mobileNew) els.mobileNew.appendChild(empty.cloneNode(true));
              } finally {
                setLoading(false);
              }
            }

            // Initialize panels visibility for mobile tabs
            function initPanelsVisibility() {
              if (els.mobileViral && els.mobileNew) {
                const activeTab = Array.from(els.tabs).find(t => t.getAttribute('aria-selected') === 'true');
                const active = activeTab ? activeTab.getAttribute('data-tab') : 'viral';
                if (active === 'viral') {
                  els.mobileViral.style.display = '';
                  els.mobileNew.style.display = 'none';
                } else {
                  els.mobileViral.style.display = 'none';
                  els.mobileNew.style.display = '';
                }
              }
            }

            // Ensure DOM ready before first render to avoid missing containers
            function start() {
              refreshEls();
              initTabs();
              initPanelsVisibility();
              scan();
              const interval = setInterval(scan, POLL_MS);
              window.addEventListener('beforeunload', () => clearInterval(interval));

              // Watch for external mutations that might clear containers; re-apply enhancement
              const target = document.getElementById('meme-viral-feature');
              if (target && 'MutationObserver' in window) {
                const mo = new MutationObserver(() => {
                  enhanceExistingCards();
                });
                mo.observe(target, {
                  childList: true,
                  subtree: true
                });
              }

              if (DEBUG) console.debug('[MVD] Initialized with polling every', POLL_MS, 'ms');
            }

            if (document.readyState === 'loading') {
              document.addEventListener('DOMContentLoaded', start, {
                once: true
              });
            } else {
              start();
            }
          })();
        </script>
      </div>
      <section id="meme-viral-feature" aria-label="Meme Viral Detector Feature" class="feature-section-wrapper">
        <div class="feature-header-label" id="il24l">
          <h1 class="gjs-t-h1 feature-title" id="igmek">MEME VIRAL DETECTOR</h1>
          <p class="feature-subtitle" id="ilpyp">Early clues for the next 1000x meme coin</p>
        </div>
        <div id="loading" class="loading-container">
          <img src="https://api.iconify.design/lucide-loader-2.svg?color=currentColor&amp;width=22&amp;height=22" alt="Loading spinner" loading="lazy" class="loading-spinner-icon" id="ieaey" />
          <span class="loading-label" id="i0vs4">Loading fresh memes...</span>
        </div>
        <section class="mobile-tabs-layout" id="iruev">
          <div role="tablist" aria-label="Token tabs" class="tabs-control" id="idzfi">
            <button type="button" data-tab="viral" aria-selected="true" aria-controls="mobile-viral" role="tab" class="tabs-button-viral" id="i33ch">
              <img src="https://api.iconify.design/lucide-flame.svg?color=currentColor&amp;width=18&amp;height=18" alt="Viral icon" loading="lazy" id="it6si" />
              <span id="it441">VIRAL</span>
            </button>
            <button type="button" data-tab="new" aria-selected="false" aria-controls="mobile-new" role="tab" class="tabs-button-new" id="idimi">
              <img src="https://api.iconify.design/lucide-clock.svg?color=currentColor&amp;width=18&amp;height=18" alt="New icon" loading="lazy" id="iqv4i" />
              <span id="icx0j">NEW</span>
            </button>
          </div>
          <div id="mobile-viral" role="tabpanel" aria-labelledby="viral" class="mobile-viral-panel"></div>
          <div id="mobile-new" role="tabpanel" aria-labelledby="new" class="mobile-new-panel"></div>
        </section>
        <section class="desktop-two-columns-layout" id="ijayu">
          <div class="viral-column" id="ilk8p">
            <h2 class="gjs-t-h2 viral-column-title" id="iuhq3">
              <img src="https://api.iconify.design/lucide-flame.svg?color=currentColor&amp;width=24&amp;height=24" alt="Fire icon" loading="lazy" id="iragc" />
              <span id="i6iio">POTENTIALLY VIRAL</span>
            </h2>
            <div id="viral-cards" aria-live="polite" class="viral-cards-grid"></div>
          </div>
          <div class="new-column" id="i6j5r">
            <h2 class="gjs-t-h2 new-column-title" id="iu7n7">
              <img src="https://api.iconify.design/lucide-clock.svg?color=currentColor&amp;width=24&amp;height=24" alt="Clock icon" loading="lazy" id="if9wu" />
              <span id="i3tcy">FRESHLY MINTED</span>
            </h2>
            <div id="new-cards" aria-live="polite" class="new-cards-grid"></div>
          </div>
        </section>
        <div id="toast" role="status" aria-live="assertive" class="toast-notification">
          <span class="toast-label" id="itqe3">
            <img src="https://api.iconify.design/lucide-activity.svg?color=currentColor&amp;width=18&amp;height=18" alt="Alert icon" loading="lazy" id="i7srf" />
            <strong class="toast-strong-text" id="i7ltg">NEW VIRAL DETECTED!</strong>
          </span>
        </div>
      </section>
    </header>
    <main class="main-content-wrapper" id="it4y8">
      <section class="aux-desktop-spacer" id="i7si6"></section>
      <section class="aux-mobile-spacer" id="izzp3"></section>
    </main>
    <footer class="footer" id="i0s9h">
      <div class="footer-container" id="i2gnt">
        <p class="footer-text" id="ifkvb">© 2025 <b id="irhr1">Lancips</b> — Fun, absurd, and dangerously early. DYOR</p>
      </div>
    </footer>
    <script id="iiqga">
      (function() {
          const root = document.getElementById('meme-viral-feature');
          const els = {
            scanCount: root.querySelector('#scan-count'),
            loading: root.querySelector('#loading'),
            viralCards: root.querySelector('#viral-cards'),
            newCards: root.querySelector('#new-cards'),
            mobileViral: root.querySelector('#mobile-viral'),
            mobileNew: root.querySelector('#mobile-new'),
            toast: root.querySelector('#toast'),
            tabs: root.querySelectorAll('[role="tab"]')
          };

          const SEARCH_QUERIES = ['pepe', 'dog', 'doge', 'shib', 'inu', 'cat', 'elon', 'meme', 'moon', 'pump', 'wojak', 'floki', 'bonk'];
          const VIRAL_LIMIT = 12;
          const NEW_LIMIT = 12;
          const FRESH_WINDOW_MS = 6 * 60 * 60 * 1000; // 6 hours
          const POLL_MS = 60000; // 60s

          const shownViral = new Set();

          els.tabs.forEach(tab => {
            tab.addEventListener('click', () => {
              els.tabs.forEach(t => {
                t.setAttribute('aria-selected', 'false');
                t.classList.remove('bg-gray-800/70', 'text-white');
                t.classList.add('bg-gray-900/40', 'text-gray-300');
              });
              tab.setAttribute('aria-selected', 'true');
              tab.classList.add('bg-gray-800/70', 'text-white');
              tab.classList.remove('bg-gray-900/40', 'text-gray-300');
              const active = tab.getAttribute('data-tab');
              if (active === 'viral') {
                els.mobileViral.classList.remove('hidden');
                els.mobileNew.classList.add('hidden');
              } else {
                els.mobileViral.classList.add('hidden');
                els.mobileNew.classList.remove('hidden');
              }
            });
          });

          function formatUSD(n) {
            const num = Number(n || 0);
            if (num >= 1e9) return '$' + (num / 1e9).toFixed(2) + 'B';
            if (num >= 1e6) return '$' + (num / 1e6).toFixed(2) + 'M';
            if (num >= 1e3) return '$' + (num / 1e3).toFixed(2) + 'K';
            return '$' + num.toFixed(2);
          }

          function formatPct(n) {
            if (n === undefined || n === null || isNaN(n)) return '—';
            const v = Number(n);
            const sign = v > 0 ? '+' : '';
            return sign + v.toFixed(2) + '%';
          }

          function chainFromURL(url = '') {
            try {
              const u = new URL(url);
              const parts = u.pathname.split('/').filter(Boolean);
              return parts[0] || 'unknown';
            } catch {
              return 'unknown';
            }
          }

          function isMemeLike(symbol, name) {
            const s = (symbol || '').toLowerCase();
            const n = (name || '').toLowerCase();
            const kws = ['pepe', 'dog', 'doge', 'shib', 'inu', 'cat', 'elon', 'meme', 'moon', 'pump', 'wojak', 'floki', 'bonk', 'pudgy', 'corgi', 'kitty'];
            return kws.some(k => s.includes(k) || n.includes(k));
          }

          function scorePair(p) {
            const vol = (p.volume && p.volume.h24) ? Number(p.volume.h24) : 0;
            const liq = (p.liquidity && p.liquidity.usd) ? Number(p.liquidity.usd) : 0;
            const ch1 = (p.priceChange && p.priceChange.h1) ? Number(p.priceChange.h1) : 0;
            const ch6 = (p.priceChange && p.priceChange.h6) ? Number(p.priceChange.h6) : 0;
            const buys = (p.txns && p.txns.h1 && p.txns.h1.buys) ? Number(p.txns.h1.buys) : 0;
            const sells = (p.txns && p.txns.h1 && p.txns.h1.sells) ? Number(p.txns.h1.sells) : 0;
            const momentum = ch1 * 1.2 + ch6 * 0.6 + (buys - sells) * 0.8;
            return Math.log10(vol + 1) * 1.5 + Math.log10(liq + 1) + momentum;
          }

          function isFresh(p) {
            const created = p.pairCreatedAt ? Number(p.pairCreatedAt) : null;
            if (!created) return false;
            return (Date.now() - created) < FRESH_WINDOW_MS;
          }

          function isViral(p) {
            const vol = (p.volume && p.volume.h24) ? Number(p.volume.h24) : 0;
            const liq = (p.liquidity && p.liquidity.usd) ? Number(p.liquidity.usd) : 0;
            const ch1 = (p.priceChange && p.priceChange.h1) ? Number(p.priceChange.h1) : 0;
            const ch6 = (p.priceChange && p.priceChange.h6) ? Number(p.priceChange.h6) : 0;
            const baseSym = p.baseToken ? p.baseToken.symbol : (p.token0 ? p.token0.symbol : '');
            const baseName = p.baseToken ? p.baseToken.name : (p.token0 ? p.token0.name : '');
            const meme = isMemeLike(baseSym, baseName);
            const momentum = ch1 > 50 || ch6 > 100;
            const healthy = liq >= 30000 || vol >= 100000;
            return meme && healthy && (momentum || scorePair(p) > 30);
          }

          function makeCard(p) {
            const chain = chainFromURL(p.url);
            const baseSymbol = p.baseToken ? p.baseToken.symbol : (p.token0 ? p.token0.symbol : '');
            const quoteSymbol = p.quoteToken ? p.quoteToken.symbol : (p.token1 ? p.token1.symbol : '');
            const price = p.priceUsd ? Number(p.priceUsd) : null;
            const ch5m = p.priceChange && p.priceChange.m5 !== undefined ? Number(p.priceChange.m5) : null;
            const ch1h = p.priceChange && p.priceChange.h1 !== undefined ? Number(p.priceChange.h1) : null;
            const ch6h = p.priceChange && p.priceChange.h6 !== undefined ? Number(p.priceChange.h6) : null;

            const hot = isViral(p);
            const created = p.pairCreatedAt ? Number(p.pairCreatedAt) : null;
            const createdAgo = created ? Math.max(1, Math.floor((Date.now() - created) / (60 * 1000))) : null;

            const card = document.createElement('article');
            card.setAttribute('data-gjs-name', 'Token Card');
            card.className = 'border gjs-t-border bg-[#0f1426] p-4 rounded-2xl shadow-sm hover:shadow-lg transition';

            card.innerHTML = `
            <div data-gjs-name="Card Header Row" class="flex items-start justify-between gap-3">
              <div data-gjs-name="Card Title Block" class="flex items-center gap-2">
                <span data-gjs-name="Card Pair Symbol" class="font-semibold text-white">${baseSymbol}/${quoteSymbol}</span>
                ${hot ? `<span data-gjs-name="Hot Badge" class="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-[var(--gjs-t-color-secondary)]/20 text-[var(--gjs-t-color-secondary)] border border-[var(--gjs-t-color-secondary)]/40">
                  <img data-gjs-name="Hot Badge Icon" src="https://api.iconify.design/lucide-trending-up.svg?color=currentColor&width=14&height=14" alt="Trending up" loading="lazy"/>
                  <span data-gjs-name="Hot Badge Label">HOT</span>
                </span>` : ''}
              </div>
              <div data-gjs-name="Chain Badge" class="inline-flex items-center gap-2 px-2 py-1 rounded-md bg-gray-900/60 border border-gray-700 text-xs text-gray-300" title="${chain}">
                <img data-gjs-name="Chain Badge Icon" src="https://api.iconify.design/lucide-link.svg?color=currentColor&width=16&height=16" alt="Chain icon" loading="lazy"/>
                <span data-gjs-name="Chain Badge Label">${(chain || 'unknown').toUpperCase()}</span>
              </div>
            </div>

            <div data-gjs-name="Metrics Row" class="grid grid-cols-4 gap-3 mt-3">
              <div data-gjs-name="Metric Item Price" class="flex flex-col">
                <span data-gjs-name="Metric Label Price" class="text-xs text-gray-400">Price (USD)</span>
                <span data-gjs-name="Metric Value Price" class="text-sm text-white">${price ? '$' + price.toFixed(6) : '—'}</span>
              </div>
              <div data-gjs-name="Metric Item 5m" class="flex flex-col">
                <span data-gjs-name="Metric Label 5m" class="text-xs text-gray-400">5m</span>
                <span data-gjs-name="Metric Value 5m" class="text-sm ${ch5m !== null ? (ch5m >= 0 ? 'text-[var(--gjs-t-color-success)]' : 'text-[var(--gjs-t-color-error)]') : 'text-gray-300'}">${formatPct(ch5m)}</span>
              </div>
              <div data-gjs-name="Metric Item 1h" class="flex flex-col">
                <span data-gjs-name="Metric Label 1h" class="text-xs text-gray-400">1h</span>
                <span data-gjs-name="Metric Value 1h" class="text-sm ${ch1h !== null ? (ch1h >= 0 ? 'text-[var(--gjs-t-color-success)]' : 'text-[var(--gjs-t-color-error)]') : 'text-gray-300'}">${formatPct(ch1h)}</span>
              </div>
              <div data-gjs-name="Metric Item 6h" class="flex flex-col">
                <span data-gjs-name="Metric Label 6h" class="text-xs text-gray-400">6h</span>
                <span data-gjs-name="Metric Value 6h" class="text-sm ${ch6h !== null ? (ch6h >= 0 ? 'text-[var(--gjs-t-color-success)]' : 'text-[var(--gjs-t-color-error)]') : 'text-gray-300'}">${formatPct(ch6h)}</span>
              </div>
            </div>

            <div data-gjs-name="Card Footer Row" class="mt-4 flex items-center justify-between gap-3">
              <div data-gjs-name="Volume Liquidity Group" class="flex items-center gap-2 flex-wrap">
                <span data-gjs-name="Volume Badge" class="inline-flex items-center gap-1 px-2 py-1 rounded-md bg-gray-900/60 border border-gray-700 text-xs text-gray-200">
                  <img data-gjs-name="Volume Icon" src="https://api.iconify.design/lucide-dollar-sign.svg?color=currentColor&width=14&height=14" alt="Volume" loading="lazy"/>
                  ${formatUSD(p.volume && p.volume.h24 ? p.volume.h24 : 0)}
                </span>
                <span data-gjs-name="Liquidity Badge" class="inline-flex items-center gap-1 px-2 py-1 rounded-md bg-gray-900/60 border border-gray-700 text-xs text-gray-200">
                  <img data-gjs-name="Liquidity Icon" src="https://api.iconify.design/lucide-droplets.svg?color=currentColor&width=14&height=14" alt="Liquidity" loading="lazy"/>
                  ${formatUSD(p.liquidity && p.liquidity.usd ? p.liquidity.usd : 0)}
                </span>
                ${createdAgo ? `<span data-gjs-name="Age Badge" class="inline-flex items-center gap-1 px-2 py-1 rounded-md bg-gray-900/60 border border-gray-700 text-xs text-gray-200">
                  <img data-gjs-name="Age Icon" src="https://api.iconify.design/lucide-clock.svg?color=currentColor&width=14&height=14" alt="Age" loading="lazy"/>
                  ${createdAgo}m ago
                </span>` : ''}
              </div>
              <a data-gjs-name="View Link Button" class="gjs-t-button inline-flex items-center gap-2 px-3 py-2 text-sm hover:opacity-90 transition" href="${p.url}" target="_blank" rel="noopener" aria-label="View on DexScreener">
                <img data-gjs-name="View Link Icon" src="https://api.iconify.design/lucide-external-link.svg?color=currentColor&width=18&height=18" alt="Open in new" loading="lazy"/>
                <span data-gjs-name="View Link Label">View</span>
              </a>
            </div>
          `;
            return card;
          }

          function makeEmptyState() {
            const wrap = document.createElement('div');
            wrap.setAttribute('data-gjs-name', 'Empty State');
            wrap.className = 'flex items-center gap-2 px-3 py-2 rounded-md bg-gray-900/40 border border-gray-700 text-gray-300';
            wrap.innerHTML = `
            <img data-gjs-name="Empty State Icon" src="https://api.iconify.design/lucide-info.svg?color=currentColor&width=18&height=18" alt="Info" loading="lazy"/>
            <span data-gjs-name="Empty State Label">No token data is available right now</span>
          `;
            return wrap;
          }

          async function fetchPairs(query) {
              const url = \`https://api.dexscreener.com/latest/dex/search?q=\${encodeURIComponent(query)}\`;
          const res = await fetch(url);
          if (!res.ok) throw new Error('Network error');
          const data = await res.json();
          return Array.isArray(data.pairs) ? data.pairs : [];
        }

        function dedupeByPairAddress(arr) {
          const seen = new Set();
          const out = [];
          for (const p of arr) {
            const addr = p.pairAddress || (p.info ? p.info.pairAddress : null) || (p.url ? p.url.split('/').pop() : null);
            if (!addr) continue;
            if (!seen.has(addr)) {
              seen.add(addr);
              out.push(p);
            }
          }
          return out;
        }

        function updateScanCount(pairs) {
          const today = Date.now() - (24 * 60 * 60 * 1000);
          const countToday = pairs.filter(p => p.pairCreatedAt && Number(p.pairCreatedAt) >= today).length;
          if (els.scanCount) els.scanCount.textContent = countToday;
        }

        function showToast() {
          if (!els.toast) return;
          els.toast.classList.remove('hidden');
          setTimeout(() => {
            els.toast.classList.add('hidden');
          }, 2600);
        }

        function render(pairs) {
          const fresh = pairs.filter(isFresh).sort((a, b) => Number(b.pairCreatedAt || 0) - Number(a.pairCreatedAt || 0)).slice(0, NEW_LIMIT);
          const viral = pairs.filter(isViral).sort((a, b) => scorePair(b) - scorePair(a)).slice(0, VIRAL_LIMIT);

          els.viralCards.innerHTML = '';
          els.newCards.innerHTML = '';

          if (viral.length === 0) {
            els.viralCards.appendChild(makeEmptyState());
          } else {
            viral.forEach(p => {
              const card = makeCard(p);
              els.viralCards.appendChild(card);
              const addr = p.pairAddress || p.url;
              if (addr && !shownViral.has(addr)) {
                shownViral.add(addr);
                showToast();
              }
            });
          }

          if (fresh.length === 0) {
            els.newCards.appendChild(makeEmptyState());
          } else {
            fresh.forEach(p => {
              const card = makeCard(p);
              els.newCards.appendChild(card);
            });
          }

          // Mobile
          els.mobileViral.innerHTML = '';
          els.mobileNew.innerHTML = '';

          if (viral.length === 0) {
            els.mobileViral.appendChild(makeEmptyState());
          } else {
            viral.forEach(p => els.mobileViral.appendChild(makeCard(p)));
          }

          if (fresh.length === 0) {
            els.mobileNew.appendChild(makeEmptyState());
          } else {
            fresh.forEach(p => els.mobileNew.appendChild(makeCard(p)));
          }

          updateScanCount(pairs);
        }

        async function scan() {
          if (els.loading) els.loading.classList.remove('hidden');
          try {
            const results = await Promise.allSettled(SEARCH_QUERIES.map(fetchPairs));
            let all = [];
            for (const r of results) {
              if (r.status === 'fulfilled' && Array.isArray(r.value)) {
                all = all.concat(r.value);
              }
            }
            const unique = dedupeByPairAddress(all);
            render(unique);
          } catch (e) {
            els.viralCards.innerHTML = '';
            els.newCards.innerHTML = '';
            els.mobileViral.innerHTML = '';
            els.mobileNew.innerHTML = '';
            const empty = makeEmptyState();
            els.viralCards.appendChild(empty.cloneNode(true));
            els.newCards.appendChild(empty.cloneNode(true));
            els.mobileViral.appendChild(empty.cloneNode(true));
            els.mobileNew.appendChild(empty.cloneNode(true));
          } finally {
            if (els.loading) els.loading.classList.add('hidden');
          }
        }

        scan();
        const interval = setInterval(scan, POLL_MS);
        window.addEventListener('beforeunload', () => clearInterval(interval));
      })();
    </script>
  </body>

</html>
